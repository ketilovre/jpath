!function(a,b){b.jpath=a;var c=function(a){"use strict";"string"==typeof a&&(a=JSON.parse(a)),this.json=a};!function(){"use strict";c.prototype.parseSegments=function(a){var b,c=-1,d=[];if(!a)return[];for(var e=a.split(".");++c<e.length;)b="*"===e[c].charAt(0),d.push({type:b?"deep":"shallow",identifier:b?e[c].slice(1):e[c]});return d}}(),function(){"use strict";function a(a,b,c){var d,e,f=-1,g=[];if(b instanceof Array||!b.hasOwnProperty(a))a:for(;++f<b.length;){if(d=b[f],d.hasOwnProperty(a))g.push(d[a]);else if(d instanceof Array){for(e=-1;++e<d.length;)if(d[e].hasOwnProperty(a)&&(g.push(d[e][a]),c))break a}else+a===f&&g.push(d);if(c&&g.length)break}else g.push(b[a]);return g}function b(a,b,c){function d(b){var f=-1;if(!c||!e.length)if(b instanceof Array)for(;++f<b.length;)d(b[f]);else if(null!==b&&"object"==typeof b){b.hasOwnProperty(a)&&e.push(b[a]);for(var g in b)null!==b[g]&&"object"==typeof b[g]&&d(b[g])}}var e=[];return d(b),e}function d(c,d,e){for(var f,g,h=d;c.length;){if(g=c.shift(),f=[],"shallow"===g.type)f=a(g.identifier,h,e);else if(h instanceof Array)for(var i=0,j=h.length;j>i;i++)f=f.concat(b(g.identifier,h[i],e));else if(null!==h&&"object"==typeof h)for(var k in h)h.hasOwnProperty(k)&&(f=f.concat(b(g.identifier,h[k],e)));h=f}return h}c.prototype.get=function(a){return d(this.parseSegments(a),this.json)},c.prototype.one=function(a){return d(this.parseSegments(a),this.json,!0)[0]}}(),function(){"use strict";function a(a,c,d,e){return d===a[0].identifier?1===a.length?e(c):b(c,a.slice(1),e):null===c||"object"!=typeof c||"deep"!==a[0].type&&"number"!=typeof d?c:b(c,a,e)}function b(b,c,d){var e;if(b instanceof Array){e=[];for(var f=0,g=b.length;g>f;f++)e[f]=a(c,b[f],f,d)}else{e={};for(var h in b)b.hasOwnProperty(h)&&(e[h]=a(c,b[h],h,d))}return e}c.prototype.transform=function(a,c){var d=this.parseSegments(a);return c&&d.length?b(this.json,d,c):this.json}}(),function(){"use strict";c.prototype.has=function(a){return void 0!==this.one(a)},c.prototype.count=function(a){return this.get(a).length},c.prototype.filter=function(a,b){var c,d=-1,e=[];for(c=this.get(a);++d<c.length;)b(c[d],d,c)&&e.push(c[d]);return e},c.prototype.map=function(a,b){var c,d=-1,e=[];for(c=this.get(a);++d<c.length;)e.push(b(c[d],d,c));return e}}(),function(b,c){"use strict";"function"==typeof define&&define.amd?define([],c):"undefined"!=typeof module&&"object"==typeof a?module.exports=c():b.roam=c()}(this,function(){"use strict";return function(a){return new c(a)}})}({},function(){return this}());