!function(a,b){b.jpath=a;var c=function(a){"use strict";this.json=a};!function(){"use strict";c.prototype.get=function(a){var b,c,d,e;for(e=this.parseSegments(a),c=this.json;e.length;){if(d=e.shift(),b=[],"shallow"===d.type)b=b.concat(this.shallow(d.identifier,c));else if(c instanceof Array)for(var f=0,g=c.length;g>f;f++)b=b.concat(this.deep(d.identifier,c[f]));else for(var h in c)c.hasOwnProperty(h)&&(b=b.concat(this.deep(d.identifier,c[h])));c=b}return c},c.prototype.transform=function(a,b){function c(a,c,e){return e===a[0].identifier&&1===a.length?b(c):e===a[0].identifier?d(c,a.slice(1)):"deep"!==a[0].type&&"number"!=typeof e||!(c instanceof Array||"object"==typeof c&&null!==c)?c:d(c,a)}function d(a,b){var d=[];if(a instanceof Array)for(var e=0,f=a.length;f>e;e++)d.push({key:e,val:c(b,a[e],e)});else for(var g in a)a.hasOwnProperty(g)&&d.push({key:g,val:c(b,a[g],g)});return d.reduce(function(a,b){if(!a){var c=0===b.key?[]:{};a=c}return a[b.key]=b.val,a},null)}var e=this.parseSegments(a);return b&&e.length?d(this.json,e):this.json}}(),function(){"use strict";c.prototype.shallow=function(a,b){var c,d,e=-1,f=[];if(b instanceof Array||!b[a])for(;++e<b.length;)if(c=b[e],c instanceof Array)if(c[a])f.push(c[a]);else for(d=-1;++d<c.length;)c[d][a]&&f.push(c[d][a]);else c[a]?f.push(c[a]):+a===e&&f.push(c);else f.push(b[a]);return f},c.prototype.deep=function(a,b){function c(b){var e=-1;if(b instanceof Array)for(;++e<b.length;)c(b[e]);else if(null!==b&&"object"==typeof b){b.hasOwnProperty(a)&&d.push(b[a]);for(var f in b)b.hasOwnProperty(f)&&c(b[f])}}var d=[];return c(b),d}}(),function(){"use strict";c.prototype.parseSegments=function(a){var b,c=-1,d=[];if(!a)return[];for(var e=a.split(".");++c<e.length;)b="*"===e[c].charAt(0),d.push({type:b?"deep":"shallow",identifier:b?e[c].slice(1):e[c]});return d}}(),function(){"use strict";c.prototype.has=function(a){return!!this.get(a).length},c.prototype.count=function(a){return this.get(a).length},c.prototype.one=function(a){return this.get(a).shift()},c.prototype.filter=function(a,b){var c,d=-1,e=[];for(c=this.get(a);++d<c.length;)b(c[d],d,c)&&e.push(c[d]);return e},c.prototype.map=function(a,b){var c,d=-1,e=[];for(c=this.get(a);++d<c.length;)e.push(b(c[d],d,c));return e}}(),function(b,c){"use strict";"function"==typeof define&&define.amd?define([],c):"undefined"!=typeof module&&"object"==typeof a?module.exports=c():b.roam=c()}(this,function(){"use strict";return function(a){return new c(a)}})}({},function(){return this}());