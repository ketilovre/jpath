!function(a,b){b.jpath=a;var c=function(a){"use strict";"string"==typeof a&&(a=JSON.parse(a)),this.json=a};!function(){"use strict";function a(a,b){var c,d,e=-1,f=[];if(b instanceof Array||!b.hasOwnProperty(a))for(;++e<b.length;)if(c=b[e],c.hasOwnProperty(a))f.push(c[a]);else if(c instanceof Array)for(d=-1;++d<c.length;)c[d].hasOwnProperty(a)&&f.push(c[d][a]);else+a===e&&f.push(c);else f.push(b[a]);return f}function b(a,b){function c(b){var e=-1;if(b instanceof Array)for(;++e<b.length;)c(b[e]);else if(null!==b&&"object"==typeof b){b.hasOwnProperty(a)&&d.push(b[a]);for(var f in b)null!==b[f]&&"object"==typeof b[f]&&c(b[f])}}var d=[];return c(b),d}c.prototype.get=function(c){for(var d,e,f=this.parseSegments(c),g=this.json;f.length;){if(e=f.shift(),d=[],"shallow"===e.type)d=a(e.identifier,g);else if(g instanceof Array)for(var h=0,i=g.length;i>h;h++)d=d.concat(b(e.identifier,g[h]));else if(null!==g&&"object"==typeof g)for(var j in g)g.hasOwnProperty(j)&&(d=d.concat(b(e.identifier,g[j])));g=d}return g}}(),function(){"use strict";c.prototype.parseSegments=function(a){var b,c=-1,d=[];if(!a)return[];for(var e=a.split(".");++c<e.length;)b="*"===e[c].charAt(0),d.push({type:b?"deep":"shallow",identifier:b?e[c].slice(1):e[c]});return d}}(),function(){"use strict";function a(a,c,d,e){return d===a[0].identifier?1===a.length?e(c):b(c,a.slice(1),e):null===c||"object"!=typeof c||"deep"!==a[0].type&&"number"!=typeof d?c:b(c,a,e)}function b(b,c,d){var e;if(b instanceof Array){e=[];for(var f=0,g=b.length;g>f;f++)e[f]=a(c,b[f],f,d)}else{e={};for(var h in b)b.hasOwnProperty(h)&&(e[h]=a(c,b[h],h,d))}return e}c.prototype.transform=function(a,c){var d=this.parseSegments(a);return c&&d.length?b(this.json,d,c):this.json}}(),function(){"use strict";c.prototype.has=function(a){return!!this.get(a).length},c.prototype.count=function(a){return this.get(a).length},c.prototype.one=function(a){return this.get(a).shift()},c.prototype.filter=function(a,b){var c,d=-1,e=[];for(c=this.get(a);++d<c.length;)b(c[d],d,c)&&e.push(c[d]);return e},c.prototype.map=function(a,b){var c,d=-1,e=[];for(c=this.get(a);++d<c.length;)e.push(b(c[d],d,c));return e}}(),function(b,c){"use strict";"function"==typeof define&&define.amd?define([],c):"undefined"!=typeof module&&"object"==typeof a?module.exports=c():b.roam=c()}(this,function(){"use strict";return function(a){return new c(a)}})}({},function(){return this}());